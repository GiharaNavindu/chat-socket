package MessageApp;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import java.util.Scanner;

public class ClientChat {

    static String host = "localhost"; // Server
    static int port = 9999;           // Server port

    public static void main(String[] args) throws IOException {
        System.out.println("\t\tSimple Socket Client");
        System.out.println("\t\t=======================");

        // Connect to the server
        Socket socket = new Socket(host, port);
        System.out.println("Server is connected\n\n");

        try {
            BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            PrintWriter out = new PrintWriter(socket.getOutputStream(), true);
            Scanner scannerInput = new Scanner(System.in);
            String messageFromServer = in.readLine();

            // Display the message from the server
            System.out.println("Message from Server: " + messageFromServer);

            // Chat loop
            String clientInput;
            while (true) {
                System.out.print("Client: ");
                clientInput = scannerInput.nextLine();
                out.println(clientInput);

                // Exit condition
                if (clientInput.equalsIgnoreCase("exit")) {
                    System.out.println("Exiting chat...");
                    break;
                }

                // Read response from server
                String responseFromServer = in.readLine();
                System.out.println("Message from Server: " + responseFromServer);
            }

            scannerInput.close();
        } finally {
            // Close the socket
            socket.close();
        }
    }
}
